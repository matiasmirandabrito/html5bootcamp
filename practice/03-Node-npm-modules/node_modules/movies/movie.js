/* 3) Create the same Movie class as in the previous practice, but inside a CommonJS module.*/

/* Required Modules */
/* 1) Add jQuery as a module. */
var jQuery = $ = require("jquery");
/* jQuery is already a node.js module, and it can be require()'d once it's istalled using: npm install jquery */


function MovieConstructor() {
  this.set = function(attr, value) {
    this[attr] = value;
  };

  this.get = function(attr) {
    return this[attr];
  };

  this.play = function() {
    $(MovieObserver).trigger("playing", [{title: this.get("title")}]);
  };

  this.stop = function() {
    $(MovieObserver).trigger("stopped");
  };
};

var MovieObserver = {}

MovieObserver.eventPlaying = function(params) {
  console.log("Playing \""+params.title+"\"...");
}

MovieObserver.eventStopped = function() {
  console.log("Playback stopped");
}

$(MovieObserver).on("playing", function(event, params) {
  MovieObserver.eventPlaying(params);
});

$(MovieObserver).on("stopped", function(event) {
  MovieObserver.eventStopped();
});


/* --- Module Exports --- */

module.exports = MovieConstructor;
